# Q : 동시에 같은 DB Table row 를 업데이트 하는 상황을 방어하기 위해 어떻게 개발하실 건지 설명해주세요.
# Answer
- DBMS 자체적으로 락을 걸어줄 수 있습니다. 동시에 동일한 자원을 요청할 경우 순서대로 접근할 수 있도록 락 기능이 도와줄 수 있습니다.
- 하지만 락으로 인해 상호배제, 상호 대기, 비선점 조건이 모두 달성될 경우 데드락이 걸릴 수 있습니다. 
- 락에는 두가지 종류가 있습니다. 낙관적 락, 비관적 락입니다. 
  - 낙관적 락에서는 동시에 접근하는 것을 막는 대신 변경한 데이터를 실제 DBMS 에 반영하는 시점에 변경 가능 여부를 확인하는 방식입니다.
    - 데이터베이스가 제공하는 락 기능을 사용하지 않고 애플리케이션 레벨에서 지원하는 락 기능입니다.  
    - version 등의 구분 칼럼을 통해 충돌을 예방합니다. 
  - 비관적 락은 하나의 작업이 완료 될 때 까지 다른 작업을 대기시킵니다. 실제 DBMS 레벨에서 락을 거는 방법입니다. 
    - 트랜잭션을 통해 동시성을 제어합니다. 
 - 낙관적 락은 따로 트랜잭션을 통한 동시성 제어가 일어나지 않기 때문이 특정한 요청에 락이 걸려 대기를 할 일이 없습니다. 그러므로 성능은 더 좋습니다. 
 - 충돌이 자주 일어나지 않는다면 낙관적 락을 사용하는 게 좋지만, 낙관적 락은 롤백이 어려우므로 충돌이 자주 발생한다면 비관적 락을 사용하는 게 좋습니다. 
